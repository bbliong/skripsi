define(["require","../my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_89b462a0da2b11e9886ab5694315db4a(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles\">\n        :host {\n          display: block;\n\n          padding: 10px;\n        }\n\n        .wrap {\n          width:100%;\n        }\n        .paper-toast-open{\n          left: 250px !important;\n        }\n      </style>\n        <!-- app-location binds to the app's URL -->\n        <app-location route=\"{{route}}\"></app-location>\n\n        <!-- this app-route manages the top-level routes -->\n        <app-route\n            route=\"{{route}}\"\n            pattern=\"/panel/proposal/add-proposal/:view\"\n            data=\"{{routeData}}\"\n            tail=\"{{subroute}}\"></app-route>\n\n      <global-variable key=\"LoginCred\" value=\"{{ storedUser }}\"></global-variable>\n      <global-variable key=\"Register\" value=\"{{ regObj }}\"></global-variable>\n      <global-variable key=\"error\" value=\"{{ error }}\"></global-variable>\n      <global-variable key=\"toast\" value=\"{{ toast }}\"></global-variable>\n      <global-data id=\"globalData\"></global-data>\n      <div class=\"card\">\n      <h1>Pendaftaran Muztahik</h1>\n      <h4 style=\"color:red\"> *Data ini tidak dapat diubah, silahkan diubah dari table muztahik </h4>\n      <vaadin-form-layout>\n            <vaadin-text-field label=\"Nama\" value=\"{{regObj.muztahik.nama}}\" disabled></vaadin-text-field>\n            <vaadin-text-field label=\"Nik\" value=\"{{regObj.muztahik.nik}}\" disabled></vaadin-text-field>\n            <vaadin-text-field label=\"No Handphone\" value=\"{{regObj.muztahik.nohp}}\" disabled></vaadin-text-field>\n            <vaadin-text-field label=\"Email\" value=\"{{regObj.muztahik.email}}\" disabled></vaadin-text-field>\n        </vaadin-form-layout> \n\n      <vaadin-form-layout>\n        <vaadin-text-area label=\"Alamat\"  colspan=\"2\" value=\"{{regObj.muztahik.alamat}}\" disabled></vaadin-text-area>\n        <vaadin-text-field label=\"Kecamatan\" value=\"{{regObj.muztahik.kecamatan}}\" disabled></vaadin-text-field>\n        <vaadin-text-field label=\"Kabupate/Kota\" value=\"{{regObj.muztahik.kabkot}}\" disabled></vaadin-text-field>\n        <vaadin-text-field label=\"Provinsi\" value=\"{{regObj.muztahik.provinsi}}\" disabled></vaadin-text-field>\n        </vaadin-form-layout>\n      </div>\n\n      <div class=\"card\">    \n      <h1>Pendaftaran Kategori</h1>\n        <vaadin-form-layout>\n        <vaadin-select value=\"{{selectedKategori}}\" colspan=\"2\">\n          <template>\n            <vaadin-list-box>\n            <dom-repeat items=\"{{Kategori}}\">\n            <template>\n              <vaadin-item label=\"{{item.Value}}\" value=\"{{item}}\">{{item.Value}}</vaadin-item>\n            </template>\n            </dom-repeat>\n            </vaadin-list-box>\n          </template>\n        </vaadin-select>\n        </vaadin-form-layout>    \n        <div class=\"wrap\">\n          <iron-pages selected=\"[[selectedKategori.Kode]]\"  attr-for-selected=\"name\">\n            <bmm-kategori-ksm name=\"Ksm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-ksm>\n            <bmm-kategori-rbm name=\"Rbm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-rbm>\n            <bmm-kategori-paud name=\"Paud\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-paud>\n            <bmm-kategori-kafala name=\"Kafala\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-kafala>\n            <bmm-kategori-jsm name=\"Jsm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-jsm>\n            <bmm-kategori-dzm name=\"Dzm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-dzm>\n            <bmm-kategori-bsu name=\"Bsu\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-bsu>\n            <bmm-kategori-br name=\"Br\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-br>\n            <bmm-kategori-btm name=\"Btm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-btm>\n            <bmm-kategori-bsm name=\"Bsm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-bsm>\n            <bmm-kategori-bcm name=\"Bcm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-bcm>\n            <bmm-kategori-asm name=\"Asm\" subKategori=\"{{subkategori}}\" user=\"{{User}}\"></bmm-kategori-asm>\n          </iron-pages>\n        </div> \n\n      <iron-localstorage name=\"register-data\" value=\"{{regObj}}\" on-iron-localstorage-load-empty=\"inisialRegObj\"></iron-localstorage>\n      <paper-button  raised class=\"indigo\" on-click=\"sendData\" >Registrasi</paper-button> \n      </div>\n      <div class=\"toast\">\n         <paper-toast text=\"{{toastError}}\" id=\"toastError\" ></paper-toast>\n      </div>\n      <iron-ajax\n          auto \n          id=\"datass\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"_handleKategori\"\n          on-error=\"_errorKategori\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n      <iron-ajax\n          auto \n          id=\"managerDPP\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"_handleManager\"\n          on-error=\"_errorManager\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n      <iron-ajax \n          id=\"postData\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"POST\"\n          on-response=\"_handleProposal\"\n          on-error=\"_handleProposalError\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\"></iron-ajax>\n      </iron-ajax>\n      <iron-ajax \n          auto\n          id=\"getData\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"_handleMuztahik\"\n          on-error=\"_handleMuztahikError\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n\n\n    "]);_templateObject_89b462a0da2b11e9886ab5694315db4a=function _templateObject_89b462a0da2b11e9886ab5694315db4a(){return data};return data}var ProposalAdd=function(_PolymerElement){babelHelpers.inherits(ProposalAdd,_PolymerElement);function ProposalAdd(){babelHelpers.classCallCheck(this,ProposalAdd);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ProposalAdd).apply(this,arguments))}babelHelpers.createClass(ProposalAdd,[{key:"_routePageChanged",value:function _routePageChanged(page){this.$.datass.url=MyAppGlobals.apiPath+"/api/kategori";this.$.datass.headers.authorization=this.storedUser.access_token;this.$.managerDPP.url=MyAppGlobals.apiPath+"/api/users?role=3&role2=4&role3=9";this.$.managerDPP.headers.authorization=this.storedUser.access_token;this.$.getData.url=MyAppGlobals.apiPath+"/api/muztahik/"+this.routeData.view;this.$.getData.headers.authorization=this.storedUser.access_token;this.selectedKategori=null}},{key:"_handleKategori",value:function _handleKategori(e){var response=e.detail.response;this.Kategori=response.data}},{key:"_errorKategori",value:function _errorKategori(e){this.error=e.detail.request.xhr.status;console.log(e)}},{key:"_handleManager",value:function _handleManager(e){var response=e.detail.response;this.User=response.data}},{key:"_errorManager",value:function _errorManager(e){this.error=e.detail.request.xhr.status;console.log(e)}},{key:"_kategoriSelected",value:function _kategoriSelected(e){if(null!==e){this.subkategori=e.sub;switch(e.Kode){case"Ksm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/ksm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$ksm||{}});break;case"Rbm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/rbm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$rbm||{}});break;case"Paud":new Promise(function(res,rej){return _require.default(["../bmm-kategori/paud.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$paud||{}});break;case"Kafala":new Promise(function(res,rej){return _require.default(["../bmm-kategori/kafala.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$kafala||{}});break;case"Jsm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/jsm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$jsm||{}});break;case"Dzm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/dzm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$dzm||{}});break;case"Bsu":new Promise(function(res,rej){return _require.default(["../bmm-kategori/bsu.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$bsu||{}});break;case"Br":new Promise(function(res,rej){return _require.default(["../bmm-kategori/br.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$br||{}});break;case"Btm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/btm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$btm||{}});break;case"Bsm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/bsm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$bsm||{}});break;case"Bcm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/bcm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$bcm||{}});break;case"Asm":new Promise(function(res,rej){return _require.default(["../bmm-kategori/asm.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$asm||{}});break;case"view404":new Promise(function(res,rej){return _require.default(["../my-view404.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$myView404||{}});break;}}}},{key:"sendData",value:function sendData(){if(null==this.selectedKategori){this.toast="Terjadi Masalah : Kategori Belum Dipilih";return}else if("undefined"==typeof this.regObj.persetujuan.manager_id||"undefined"==typeof this.regObj.persetujuan.kadiv_id){this.toast="Terjadi Masalah : Manager ID atau Kadiv ID belum terisi";return}this.$.postData.url=MyAppGlobals.apiPath+"/api/pendaftaran";this.$.postData.headers.authorization=this.storedUser.access_token;this.$.postData.body={muztahik_id:this.regObj.muztahik._id,judul_proposal:this.regObj.judul_proposal,tujuan_proposal:this.regObj.tujuan_proposal,tanggalProposal:this.regObj.tanggalProposal,kategori:this.selectedKategori.KodeP,kategoris:this.regObj.kategoris,persetujuan:{Proposal:1,manager_id:this.regObj.persetujuan.manager_id}};console.log(this.$.postData.body);this.$.postData.generateRequest()}},{key:"_handleProposal",value:function _handleProposal(e){this.toast=e.detail.response.Message;this.set("route.path","/panel/proposal")}},{key:"_handleProposalError",value:function _handleProposalError(e){if(401==e.detail.request.xhr.status){this.error=e.detail.request.xhr.status}else{this.toast=e.detail.request.xhr.response.Message}}},{key:"_handleMuztahik",value:function _handleMuztahik(e){var date=this.formatDate(new Date),data={tanggalProposal:new Date(date).toISOString(),muztahik:e.detail.response.data,kategoris:{},persetujuan:{}};this.regObj=data}},{key:"_handleMuztahikError",value:function _handleMuztahikError(e){this.set("route.path","/panel/muztahik")}},{key:"formatDate",value:function formatDate(date){var dd=date.getDate(),mm=date.getMonth()+1,yyyy=date.getFullYear();return yyyy+"-"+mm+"-"+dd}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_89b462a0da2b11e9886ab5694315db4a())}},{key:"properties",get:function get(){return{Kategori:{type:Array,notify:!0,value:function value(){return[]}},User:{type:Array,notify:!0,value:function value(){return[]}},selectedKategori:{type:Object,notify:!0},storedUser:{type:Object,notify:!0},regObj:{type:Object,notify:!0,value:function value(){return{}}},nama:{type:String,notify:!0},subkategori:{type:Array,notify:!0,value:function value(){return[]}},toastError:String,resID:String}}},{key:"observers",get:function get(){return["_kategoriSelected(selectedKategori)","_routePageChanged(route.*)"]}}]);return ProposalAdd}(_myApp.PolymerElement);window.customElements.define("bmm-proposal-add",ProposalAdd)});