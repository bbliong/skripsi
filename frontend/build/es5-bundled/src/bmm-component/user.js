define(["require","../my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_3b5850d0a3c111e9ab8d3bc52ff0ef99(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles\">\n        :host {\n          display: block;\n\n          padding: 10px;\n        }\n\n        .filter-side {\n          position:absolute;\n          top : 120px;\n          right :50px;\n        }\n        \n        #pages {\n          display: flex;\n          flex-wrap: wrap;\n          margin: 20px;\n        }\n\n        .search {\n          margin-bottom :20px;\n        }\n\n        #pages > button {\n          user-select: none;\n          padding: 5px;\n          margin: 0 5px;\n          border-radius: 100px;\n          border: 0;\n          background: transparent;\n          font: inherit;\n          outline: none;\n          cursor: pointer;\n        }\n\n        #pages > button:not([disabled]):hover,\n        #pages > button:focus {\n          color: #ccc;\n          background-color: #eee;\n        }\n\n        #pages > button[selected] {\n          font-weight: bold;\n          color: white;\n          background-color: #ccc;\n        }\n\n        #pages > button[disabled] {\n          opacity: 0.5;\n          cursor: default;\n        }\n        paper-button.green {\n          background-color: var(--paper-green-500);\n          color: white;\n        }\n        \n        paper-button.green[active] {\n          background-color: var(--paper-red-500);\n        }\n        vaadin-grid-cell-content{\n          overflow :unset;\n        }\n        \n        #main {\n          display :none;\n        }\n        vaadin-grid {\n          font-size :14px;\n        }\n      </style>\n       <bmm-loader></bmm-loader>\n      <!-- app-location binds to the app's URL -->\n      <app-location route=\"{{route}}\"></app-location>\n\n      <!-- this app-route manages the top-level routes -->\n      <app-route\n          route=\"{{route}}\"\n          pattern=\"/panel/:view\"\n          data=\"{{routeData}}\"\n          tail=\"{{subroute}}\"></app-route>\n\n      <div class=\"card\" id=\"main\">\n        <h1>Data User</h1>\n        <iron-ajax\n          id=\"GetUser\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"_handleResponseM\"\n          on-error=\"_handleErrorM\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\"></iron-ajax>\n        \n        <!-- ajax delete -->\n          <iron-ajax\n          id=\"DeleteUser\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"DELETE\"\n          on-response=\"_handleUserDelete\"\n          on-error=\"_handleUserDeleteError\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\"></iron-ajax>\n\n          <global-variable key=\"LoginCred\" \n              value=\"{{ storedUser }}\">\n          </global-variable>\n          <global-variable key=\"error\" \n              value=\"{{ error }}\">\n          </global-variable>\n          <global-data id=\"globalData\">\n          </global-data>\n        \n\n          <div class=\"filter-side\">\n              <paper-button  raised class=\"indigo\" on-click=\"_addUser\" id=\"addUser\">Tambah</paper-button>\n          </div>\n\n\n          <!-- Table  -->\n          <vaadin-grid theme=\"column-borders\" column-reordering-allowed multi-sort id=\"grid\" page-size=\"10\" height-by-rows aria-label=\"Selection using Active Item Example\" >\n            <vaadin-grid-sort-column path=\"username\" header=\"Username\"  id=\"username\" width=\"200px\"></vaadin-grid-sort-column >\n              <vaadin-grid-sort-column header=\"Nama\"  path=\"nama\" width=\"300px\"></vaadin-grid-sort-column >\n              <vaadin-grid-sort-column header=\"Jabatan\" id=\"jabatan\" width=\"150px\"></vaadin-grid-sort-column >\n              <vaadin-grid-column header=\"Action\" id=\"action\"></vaadin-grid-column>\n          </vaadin-grid>\n          <div id=\"pages\"></div>\n          <!-- End Table -->\n      </div>\n    "]);_templateObject_3b5850d0a3c111e9ab8d3bc52ff0ef99=function _templateObject_3b5850d0a3c111e9ab8d3bc52ff0ef99(){return data};return data}new Promise(function(res,rej){return _require.default(["../config/loader.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$loader||{}});var User=function(_PolymerElement){babelHelpers.inherits(User,_PolymerElement);function User(){babelHelpers.classCallCheck(this,User);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(User).apply(this,arguments))}babelHelpers.createClass(User,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(User.prototype),"connectedCallback",this).call(this);this._loading(1)}},{key:"_loading",value:function _loading(show){if(0==show){this.shadowRoot.querySelector("#main").style.display="block";var that=this;setTimeout(function(){that.shadowRoot.querySelector("bmm-loader").style.display="none"},2e3)}else{this.shadowRoot.querySelector("#main").style.display="none";this.shadowRoot.querySelector("bmm-loader").style.display="block"}}},{key:"_activatedChanged",value:function _activatedChanged(newValue,oldValue){if(newValue){localStorage.removeItem("register-data");this.getData(this.storeData)}}},{key:"_clicked",value:function _clicked(){var action=this.$.action,that=this;action.renderer=function(root,column,rowData){root.innerHTML="<paper-icon-button icon =\"settings\" class=\"green\">Edit</paper-icon-button><paper-icon-button icon = \"clear\" class=\"red\">Delete</paper-icon-button>";root.childNodes[0].addEventListener("click",function(e){that.set("subroute.path","/edit-user/"+rowData.item.Id)});root.childNodes[1].addEventListener("click",function(e){if(confirm("Yakin hapus pendaftaran proposal "+rowData.item.muztahiks.nama+" dengan asnaf "+rowData.item.kategoris.asnaf+". Jika data dihapus, tidak dapat dikembalikan kembali!")){that.$.DeleteUser.url=MyAppGlobals.apiPath+"/api/user/"+rowData.item._id;that.$.DeleteUser.headers.authorization=that.storedUser.access_token;that.$.DeleteUser.generateRequest()}})}}},{key:"_addUser",value:function _addUser(){this.set("subroute.path","/add-user")}},{key:"getData",value:function getData(storeData){var url=1<arguments.length&&arguments[1]!==void 0?arguments[1]:MyAppGlobals.apiPath+"/api/users";this.$.GetUser.url=url;this.$.GetUser.headers.authorization=this.storedUser.access_token;this.$.GetUser.generateRequest()}},{key:"_handleResponseM",value:function _handleResponseM(event){var response=event.detail.response;this.users=response.data;var grid=this.$.grid;grid.items=this.users;this._clicked();this.updateItemsFromPage(1);this.$.jabatan.renderer=function(root,grid,rowData){var jabatan=" ";switch("".concat(rowData.item.role)){case"1":jabatan="Admin";break;case"2":jabatan="Staff";break;case"3":jabatan="Manager";break;case"4":jabatan="Kafiv";break;case"5":jabatan="Administrasi";break;case"6":jabatan="Keuangan";break;default:{jabatan=""}}root.textContent=jabatan}}},{key:"_handleErrorM",value:function _handleErrorM(e){this.error=e.detail.request.xhr.status}},{key:"updateItemsFromPage",value:function updateItemsFromPage(page){if(null!==this.users){var pagesControl=this.$.pages,that=this,grid=this.$.grid;if(page===void 0){return}if(!that.pages){that.pages=Array.apply(null,{length:Math.ceil(this.users.length/grid.pageSize)}).map(function(item,index){return index+1});var prevBtn=window.document.createElement("button");prevBtn.classList.add("navigation-page");prevBtn.textContent="previous";prevBtn.addEventListener("click",function(){var selectedPage=parseInt(pagesControl.querySelector("[selected]").textContent);that.updateItemsFromPage(selectedPage-1)});pagesControl.appendChild(prevBtn);that.pages.forEach(function(pageNumber){var pageBtn=window.document.createElement("button");pageBtn.classList.add("navigation-page");pageBtn.textContent=pageNumber;pageBtn.addEventListener("click",function(e){that.updateItemsFromPage(parseInt(e.target.textContent))});if(pageNumber===page){pageBtn.setAttribute("selected",!0)}pagesControl.appendChild(pageBtn)});var nextBtn=window.document.createElement("button");nextBtn.classList.add("navigation-page-number");nextBtn.textContent="next";nextBtn.addEventListener("click",function(){var selectedPage=parseInt(pagesControl.querySelector("[selected]").textContent);that.updateItemsFromPage(selectedPage+1)});pagesControl.appendChild(nextBtn)}var buttons=Array.from(pagesControl.children);buttons.forEach(function(btn,index){if(parseInt(btn.textContent)===page){btn.setAttribute("selected",!0)}else{btn.removeAttribute("selected")}if(0===index){if(1===page){btn.setAttribute("disabled","")}else{btn.removeAttribute("disabled")}}if(index===buttons.length-1){if(page===that.pages.length){btn.setAttribute("disabled","")}else{btn.removeAttribute("disabled")}}});var start=(page-1)*grid.pageSize,end=page*grid.pageSize;grid.items=this.users.slice(start,end);this._clicked();this._loading(0)}}},{key:"_handleUserDelete",value:function _handleUserDelete(e){this.getData(this.storeDatagetData)}},{key:"_handleUserDeleteError",value:function _handleUserDeleteError(e){console.log(e)}},{key:"_addUser",value:function _addUser(){this.set("subroute.path","/add-user")}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_3b5850d0a3c111e9ab8d3bc52ff0ef99())}},{key:"properties",get:function get(){return{users:{type:Array,notify:!0},Search:String,storedUser:{type:Object,notify:!0},pages:{type:Array,notify:!0},incre:{type:Number,value:0},activated:{type:Boolean,value:!1,observer:"_activatedChanged"}}}},{key:"observers",get:function get(){return[]}}]);return User}(_myApp.PolymerElement);window.customElements.define("bmm-user",User)});