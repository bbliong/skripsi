define(["require","../my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_89890ce0da2b11e9886ab5694315db4a(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles\">\n        :host {\n          display: block;\n\n          padding: 10px;\n        }\n         p{\n           color : red;\n           font-weight : bold;\n         }\n      </style>\n\n      <bmm-loader></bmm-loader>\n      <!-- this app-route manages the top-level routes -->\n      <app-route\n        route=\"{{route}}\"\n        pattern=\"/panel/muztahik/:view\"\n        data=\"{{routeData}}\"\n        tail=\"{{subroute}}\"></app-route>\n\n      <global-variable key=\"LoginCred\" value=\"{{ storedUser }}\"></global-variable>\n      <global-variable key=\"Register\" value=\"{{ regObj }}\"></global-variable>\n      <global-variable key=\"error\" value=\"{{ error }}\"></global-variable>\n      <global-variable key=\"toast\" value=\"{{ toast }}\"></global-variable>\n      <global-data id=\"globalData\"></global-data>\n\n      <iron-ajax\n          auto \n          id=\"datass\"\n          on-response=\"_handleKategori\"\n          on-error=\"_errorKategori\">\n      </iron-ajax>\n\n      <iron-ajax \n          id=\"printData\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          method=\"POST\"\n          handle-as=\"json\"\n          on-response=\"_handleReport\"\n          on-error=\"_handleReportError\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n\n\n      <div class=\"card\" id=\"main\">\n        <h1>Laporan</h1>\n        <vaadin-form-layout>\n          <vaadin-date-picker id=\"start\" label=\"Tanggal Awal\" value=\"{{filter.start_date}}\"></vaadin-date-picker>\n          <vaadin-date-picker id=\"end\" label=\"Tanggal Akhir\" value=\"{{filter.end_date}}\" ></vaadin-date-picker>\n          <vaadin-select value=\"{{selectedKategori}}\" colspan=\"2\" label=\"kategori\">\n            <template>\n              <vaadin-list-box>\n              <vaadin-item label=\"Semua\" value=\"0\">Semua</vaadin-item>\n                <dom-repeat items=\"{{Kategori}}\">\n                  <template>\n                    <vaadin-item label=\"{{item.Value}}\" value=\"{{item.KodeP}}\">{{item.Value}}</vaadin-item>\n                  </template>\n                </dom-repeat>\n              </vaadin-list-box>\n            </template>\n          </vaadin-select>\n\n          <vaadin-button on-click=\"printData\" theme=\"success\"> Monitoring </vaadin-button>\n          <vaadin-button on-click=\"printDataKategori\"  theme=\"primary\"> Per Kategori</vaadin-button>\n        </vaadin-form-layout>\n\n        <p> *Tombol Monitoring digunakan untuk mencetak laporan dalam 1 buah file (filter kategori tidak berpengaruh)</p>\n        <p> *Tombol Per Kategori digunakan untuk mencetak laporan monitoring dengan file terpisah</p>\n      </div>\n    "]);_templateObject_89890ce0da2b11e9886ab5694315db4a=function _templateObject_89890ce0da2b11e9886ab5694315db4a(){return data};return data}new Promise(function(res,rej){return _require.default(["../config/loader.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$loader||{}});var Laporan=function(_PolymerElement){babelHelpers.inherits(Laporan,_PolymerElement);function Laporan(){babelHelpers.classCallCheck(this,Laporan);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(Laporan).apply(this,arguments))}babelHelpers.createClass(Laporan,[{key:"_changeDateStart",value:function _changeDateStart(f){if(""!==f&&"undefined"!==typeof f){var date=this.$.start,that=this;date.value=this.formatDate(new Date(f));if(""!==date.value){that.Filter.start_date=new Date(date.value).toISOString()}date.addEventListener("change",function(){if(""!==date.value){that.Filter.start_date=new Date(date.value).toISOString()}})}}},{key:"_changeDateEnd",value:function _changeDateEnd(f){if(""!==f&&"undefined"!==typeof f){var date=this.$.end,that=this;date.value=this.formatDate(new Date(f));if(""!==date.value){that.Filter.end_date=new Date(date.value).toISOString()}date.addEventListener("change",function(){if(""!==date.value){that.Filter.end_date=new Date(date.value).toISOString()}})}}},{key:"formatDate",value:function formatDate(date){var dd=date.getDate(),mm=date.getMonth()+1,yyyy=date.getFullYear();return yyyy+"-"+mm+"-"+dd}},{key:"_routePageChanged",value:function _routePageChanged(page){this.$.datass.url="change";this.$.datass.url=MyAppGlobals.apiPath+"/api/kategori";this.$.datass.headers.authorization=this.storedUser.access_token}},{key:"_handleKategori",value:function _handleKategori(e){var response=e.detail.response;this.Kategori=response.data;this._loading(0)}},{key:"_errorKategori",value:function _errorKategori(e){console.log(e)}},{key:"_loading",value:function _loading(show){if(0==show){this.shadowRoot.querySelector("#main").style.display="block";var that=this;setTimeout(function(){that.shadowRoot.querySelector("bmm-loader").style.display="none"},2e3)}else{this.shadowRoot.querySelector("#main").style.display="none";this.shadowRoot.querySelector("bmm-loader").style.display="block"}}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(Laporan.prototype),"connectedCallback",this).call(this);this._loading(1)}},{key:"printData",value:function printData(){this.$.printData.url=MyAppGlobals.apiPath+"/api/report/proposal";this.$.printData.headers.authorization=this.storedUser.access_token;this.$.printData.body={start_date:this.Filter.start_date,end_date:this.Filter.end_date};this.$.printData.generateRequest()}},{key:"printDataKategori",value:function printDataKategori(){if(""==this.selectedKategori){this.toast="Kategori belum dipilih";return}this.$.printData.url=MyAppGlobals.apiPath+"/api/report/proposal/kategori";this.$.printData.headers.authorization=this.storedUser.access_token;this.$.printData.body={start_date:this.Filter.start_date,end_date:this.Filter.end_date,kategori:this.selectedKategori};console.log(this.$.printData.body);this.$.printData.generateRequest()}},{key:"_handleReport",value:function _handleReport(e){if("undefined"!==typeof e.detail.response.url){document.location.href=MyAppGlobals.apiPath+e.detail.response.url}}},{key:"_handleReportError",value:function _handleReportError(e){this.error=e.detail.request.xhr.status;console.log(e)}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_89890ce0da2b11e9886ab5694315db4a())}},{key:"properties",get:function get(){return{Kategori:{type:Array,notify:!0,value:function value(){return[]}},selectedKategori:{type:Number,notify:!0},Filter:{type:Object,notify:!0,value:function value(){return{start_date:this.formatDate(new Date),end_date:this.formatDate(new Date)}}}}}},{key:"observers",get:function get(){return["_routePageChanged(routeData.*)","_changeDateStart(Filter.start_date)","_changeDateEnd(Filter.end_date)"]}}]);return Laporan}(_myApp.PolymerElement);window.customElements.define("bmm-laporan",Laporan)});