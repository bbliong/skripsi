define(["require","../my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject2_8935bcc0da2b11e9886ab5694315db4a(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles\">\n        :host {\n          display: block;\n        }\n\n       \n         /* Phone and tablet */\n          #chartBMM1 {\n            height: 300px;\n            width: 300px;\n          }\n          #chartBMM2 {\n            height: 300px;\n            width: 300px;\n          }\n\n      \n          .bar1 {\n              display: blocks;\n              margin-top  : -50px;\n            }\n          \n          .header{\n            background: #5C55BF;\n            color: white;\n            padding: 50px;\n            margin-top: -10px;\n          }\n\n          .header > h1 {\n            color : #fff;\n            display : inline;\n          }\n\n          /* Desktop */\n          @media screen and (min-width: 1024px) {\n            #chartBMM1 {\n              width: 500px;\n            }\n            #chartBMM2 {\n              width: 100%;\n            }\n\n           .bar1 {\n              display: flex;\n            }\n\n            .bar1 > .card {\n                display: inline-block;\n                flex: 1;\n            }\n\n            .bar1 > .card:nth-child(1){\n              width : 500px;\n            }\n\n            .bar1 > .card:nth-child(2){\n              width : 400px;\n            }\n\n          }\n\n          #main {\n          display :none;\n        }\n\n        .card {\n          box-shadow: 2px 6px 15px 0 rgba(69,65,78,.1);\n          -webkit-box-shadow: 2px 6px 15px 0 rgba(69,65,78,.1);\n          -moz-box-shadow: 2px 6px 15px 0 rgba(69,65,78,.1);\n        }\n\n        .card > span {\n          padding: 5px;\n          border-radius: 50%;\n          border: 1px solid white;\n          display: inline;\n          right: 2px;\n          text-align: right;\n          position: absolute;\n          right: 10px;\n          top: 10px;\n          width: 30px;\n          height: 30px;\n          line-height: 30px;\n          text-align: center;\n        }\n\n      </style>\n     \n\n      <div id=\"main\">\n      <bmm-loader></bmm-loader>\n        <div class=\"header\">\n        <h1> Grafik Proposal Masuk Baitulmaal Muamalat</h1>\n        <paper-button raised class=\"indigo\" on-click=\"refreshCount\">Refresh</paper-button>\n        </div>  \n        <div class=\"bar1\">\n        <div class=\"card\" >\n          <h3> Proposal per Kategori</h3>\n          <google-chart \n            id=\"chartBMM1\"\n            type=\"pie\"\n            cols='[{\"label\": \"Kategori\", \"type\": \"string\"},{\"label\": \"Jumlah\", \"type\": \"number\"}]'\n            rows='{{Kategori}}'\n            options='{\"vAxis\": {\"minValue\" : 0, \"maxValue\": 20},\n            \"chartArea\": {\"width\": \"100%\"},\n            \"selectionMode\": \"multiple\"}'\n          >\n          </google-chart>\n        </div>\n         <div class=\"card\">\n            <h3> Data Jumlah </h3>\n            <div class=\"card\" style=\"background : #990099; margin:0;margin-bottom:10px;color:white;position:relative;\">\n              Data Muztahik \n              <span> {{JumlahMuztahik}} </span>\n            </div>  \n            <div class=\"card\" style=\"background : #0099C6; margin:0;margin-bottom:10px;color:white;position:relative;\">\n              Data Proposal Masuk\n              <span> {{JumlahProposal}} </span>\n            </div>  \n            <div class=\"card\" style=\"background : #B82E2E; margin:0;margin-bottom:10px;color:white;position:relative;\">\n              Data  Proposal Sudah Pencairan\n              <span> {{JumlahPencairan}} </span>\n            </div>          \n         </div>\n      </div>\n        <div class=\"card\">\n          <h3>Status Proposal </h3>\n          <google-chart \n            id=\"chartBMM2\"\n            type=\"column\"\n            cols='[{\"label\": \"Kategori\", \"type\": \"string\"},{\"label\": \"Jumlah\", \"type\": \"number\"}]'\n            rows='{{Graph2}}' >\n          </google-chart>\n        </div>\n\n      </div>\n\n      \n\n\n        <iron-ajax\n          id=\"Counts\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"getCount\"\n          on-error=\"handleError\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n      <global-variable key=\"LoginCred\" \n           value=\"{{ storedUser }}\">\n      </global-variable>\n      <global-variable key=\"error\" \n           value=\"{{ error }}\">\n      </global-variable>\n      <global-data id=\"globalData\">\n      </global-data>\n      \n\n    "]);_templateObject2_8935bcc0da2b11e9886ab5694315db4a=function _templateObject2_8935bcc0da2b11e9886ab5694315db4a(){return data};return data}function _templateObject_8935bcc0da2b11e9886ab5694315db4a(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: -webkit-flex;\n        display: -ms-flex;\n        display: flex;\n        margin: 0;\n        padding: 0;\n        width: 400px;\n        height: 300px;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n\n      :host([type=\"gauge\"]) {\n        width: 300px;\n        height: 300px;\n      }\n\n      #chartdiv {\n        width: 100%;\n      }\n    </style>\n    <div id=\"styles\"></div>\n    <google-chart-loader id=\"loader\" type=\"[[type]]\"></google-chart-loader>\n    <div id=\"chartdiv\"></div>\n  "]);_templateObject_8935bcc0da2b11e9886ab5694315db4a=function _templateObject_8935bcc0da2b11e9886ab5694315db4a(){return data};return data}var DEFACTO_CHART_PACKAGE="corechart",Namespace={CHARTS:"charts",VIS:"visualization"},CHART_CONSTRUCTORS={area:{ctor:"AreaChart"},bar:{ctor:"BarChart"},"md-bar":{ctor:"Bar",pkg:"bar"},bubble:{ctor:"BubbleChart"},calendar:{ctor:"Calendar",pkg:"calendar"},candlestick:{ctor:"CandlestickChart"},column:{ctor:"ColumnChart"},combo:{ctor:"ComboChart"},gauge:{ctor:"Gauge",pkg:"gauge"},geo:{ctor:"GeoChart"},histogram:{ctor:"Histogram"},line:{ctor:"LineChart"},"md-line":{ctor:"Line",pkg:"line"},org:{ctor:"OrgChart",pkg:"orgchart"},pie:{ctor:"PieChart"},sankey:{ctor:"Sankey",pkg:"sankey"},scatter:{ctor:"ScatterChart"},"md-scatter":{ctor:"Scatter",pkg:"scatter"},"stepped-area":{ctor:"SteppedAreaChart"},table:{ctor:"Table",pkg:"table"},timeline:{ctor:"Timeline",pkg:"timeline"},treemap:{ctor:"TreeMap",pkg:"treemap"},wordtree:{ctor:"WordTree",namespace:Namespace.VIS,pkg:"wordtree"}};function namespaceForType(type){return google[0===type.indexOf("md-")?Namespace.CHARTS:Namespace.VIS]}var loaderPromise=new Promise(function(resolve,reject){if("undefined"!==typeof google&&google.charts&&"function"===typeof google.charts.load){resolve()}else{var loaderScript=document.querySelector("script[src=\"https://www.gstatic.com/charts/loader.js\"]");if(!loaderScript){loaderScript=document.createElement("script");loaderScript.src="https://www.gstatic.com/charts/loader.js";document.head.appendChild(loaderScript)}loaderScript.addEventListener("load",resolve);loaderScript.addEventListener("error",reject)}}),packagesToLoad={},promises={},resolves={};(0,_myApp.Polymer)({is:"google-chart-loader",properties:{packages:{type:Array,value:function value(){return[]},observer:"_loadPackages"},type:{type:String,observer:"_loadPackageForType"}},get _corePackage(){if(promises[DEFACTO_CHART_PACKAGE]){return promises[DEFACTO_CHART_PACKAGE]}return this._loadPackages([DEFACTO_CHART_PACKAGE]).then(function(pkgs){return pkgs[0]})},_loadPackagesDebounce:function _loadPackagesDebounce(){var _this=this;this.debounce("loadPackages",function(){var packages=Object.keys(packagesToLoad);if(!packages.length){return}packagesToLoad={};loaderPromise.then(function(){google.charts.load("current",{packages:packages,language:document.documentElement.lang||"en"});google.charts.setOnLoadCallback(function(){packages.forEach(function(pkg){this.fire("loaded",pkg);resolves[pkg](google.visualization)}.bind(this))}.bind(this))}.bind(_this))},100)},_loadPackages:function _loadPackages(pkgs){var returns=[];pkgs.forEach(function(pkg){if(!promises[pkg]){packagesToLoad[pkg]=!0;promises[pkg]=new Promise(function(resolve){resolves[pkg]=resolve});this._loadPackagesDebounce()}returns.push(promises[pkg])}.bind(this));return Promise.all(returns)},_loadPackageForType:function _loadPackageForType(type){var chartData=CHART_CONSTRUCTORS[type];if(!chartData){return Promise.reject("This chart type is not yet supported: "+type)}return this._loadPackages([chartData.pkg||DEFACTO_CHART_PACKAGE]).then(function(){var namespace=google[chartData.namespace]||namespaceForType(type);return namespace[chartData.ctor]})},create:function create(type,el){return this._loadPackageForType(type).then(function(ctor){return new ctor(el)})},fireOnChartEvent:function fireOnChartEvent(chart,eventName,opt_once){return this._corePackage.then(function(viz){var adder=opt_once?viz.events.addOneTimeListener:viz.events.addListener;adder(chart,eventName,function(event){this.fire("google-chart-"+eventName,{chart:chart,data:event})}.bind(this))}.bind(this))},dataTable:function dataTable(data){return this._corePackage.then(function(viz){if(null==data){return new viz.DataTable}else if(data.getNumberOfRows){return data}else if(data.cols){return new viz.DataTable(data)}else if(0<data.length){return viz.arrayToDataTable(data)}else if(0===data.length){return Promise.reject("Data was empty.")}return Promise.reject("Data format was not recognized.")})},dataView:function dataView(data){return this._corePackage.then(function(viz){return new viz.DataView(data)})},query:function query(url,opt_options){return this._corePackage.then(function(viz){return new viz.Query(url,opt_options)})}});(0,_myApp.Polymer)({_template:(0,_myApp.html$1)(_templateObject_8935bcc0da2b11e9886ab5694315db4a()),is:"google-chart",properties:{type:{type:String,value:"column",observer:"_typeChanged"},events:{type:Array,value:function value(){return[]}},options:{type:Object},cols:{type:Array,observer:"_rowsOrColumnsChanged"},rows:{type:Array,observer:"_rowsOrColumnsChanged"},data:{type:String,observer:"_dataChanged"},view:{type:Object,observer:"_viewChanged"},selection:{type:Array,notify:!0,observer:"_setSelection"},drawn:{type:Boolean,readOnly:!0,value:!1},_chart:{type:Object,value:null},_dataView:{type:Object,value:null}},observers:["_draw(_chart, _dataView)","_subOptionChanged(options.*)"],listeners:{"google-chart-select":"_updateSelection","google-chart-ready":"_onChartReady"},_selection:null,_typeChanged:function _typeChanged(){var loader=this.$.loader;loader.create(this.type,this.$.chartdiv).then(function(chart){if(!this.$.styles.children.length){this._localizeGlobalStylesheets()}Object.keys(this.events.concat(["select","ready"]).reduce(function(set,eventName){set[eventName]=!0;return set},{})).forEach(function(eventName){loader.fireOnChartEvent(chart,eventName)});this._setDrawn(!1);this._chart=chart}.bind(this))},_subOptionChanged:function _subOptionChanged(optionChangeDetails){var _this2=this;this.options=optionChangeDetails.base;this.debounce("optionChangeRedraw",function(){_this2.redraw()},5)},_setSelection:function _setSelection(){if(!this.drawn||!this.selection||this.selection===this._selection){return}if(this._chart.setSelection){this._chart.setSelection(this.selection)}this._selection=this.selection},_updateSelection:function _updateSelection(){var selection=this._chart.getSelection();this._selection=selection;this.selection=selection},_onChartReady:function _onChartReady(){this._setDrawn(!0);this._selection=null;this._setSelection()},redraw:function redraw(){if(!this._chart||!this._dataView){return}this._draw(this._chart,this._dataView)},_draw:function _draw(chart,data){if(null==chart||null==data){return}try{this._setDrawn(!1);chart.draw(data,this.options||{})}catch(error){this.$.chartdiv.textContent=error}},get imageURI(){if(!this._chart){return null}return this._chart.getImageURI()},_viewChanged:function _viewChanged(view){if(!view){return}this._dataView=view},_rowsOrColumnsChanged:function _rowsOrColumnsChanged(){var rows=this.rows,cols=this.cols;if(!rows||!cols){return}var loader=this.$.loader;loader.dataTable(void 0).then(function(dataTable){cols.forEach(function(col){dataTable.addColumn(col)});dataTable.addRows(rows);return dataTable}.bind(this)).then(loader.dataView.bind(loader)).then(function(dataView){this._dataView=dataView}.bind(this)).catch(function(reason){this.$.chartdiv.textContent=reason}.bind(this))},_dataChanged:function _dataChanged(data){var dataPromise;if(!data){return}var isString=!1;try{data=JSON.parse(data)}catch(e){isString="string"==typeof data||babelHelpers.instanceof(data,String)}if(isString){var request=document.createElement("iron-request");dataPromise=request.send({url:data,handleAs:"json"}).then(function(xhr){return xhr.response})}else{dataPromise=Promise.resolve(data)}var loader=this.$.loader;dataPromise.then(loader.dataTable.bind(loader)).then(loader.dataView.bind(loader)).then(function(dataView){this._dataView=dataView}.bind(this))},_localizeGlobalStylesheets:function _localizeGlobalStylesheets(){for(var stylesheets=(0,_myApp.dom)(document.head).querySelectorAll("link[rel=\"stylesheet\"][type=\"text/css\"]"),stylesheetsArray=Array.from(stylesheets),i=0;i<stylesheetsArray.length;i++){var sheetLinkEl=stylesheetsArray[i],isGchartStylesheet=0==sheetLinkEl.id.indexOf("load-css-");if(isGchartStylesheet){var clonedLinkEl=document.createElement("link");clonedLinkEl.setAttribute("rel","stylesheet");clonedLinkEl.setAttribute("type","text/css");clonedLinkEl.setAttribute("href",sheetLinkEl.getAttribute("href"));(0,_myApp.dom)(this.$.styles).appendChild(clonedLinkEl)}}}});new Promise(function(res,rej){return _require.default(["../config/loader.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$loader||{}});var Beranda=function(_mixinBehaviors){babelHelpers.inherits(Beranda,_mixinBehaviors);function Beranda(){babelHelpers.classCallCheck(this,Beranda);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(Beranda).apply(this,arguments))}babelHelpers.createClass(Beranda,[{key:"_loading",value:function _loading(show){if(0==show){this.shadowRoot.querySelector("#main").style.display="block";var that=this;setTimeout(function(){that.shadowRoot.querySelector("bmm-loader").style.display="none"},2e3)}else{this.shadowRoot.querySelector("#main").style.display="none";this.shadowRoot.querySelector("bmm-loader").style.display="block"}}},{key:"getCount",value:function getCount(e){var data=e.detail.response.data,data2=e.detail.response.data2,data3=e.detail.response.data3,kategori=[];for(var key in data){kategori.push([key,data[key]])}var Graph2=[],index=["Belum Diverifikasi","Sudah Diverifikasi","UPD Sudah Dibuat","UPD diperiksa Manager","UPD Disetujui Kadiv/Direktur","UPD Tidak disetujui Kadiv/Direktur","Komite sudah dibentuk","PPD sudah dibuat","Pencairan"];for(var key in data2){Graph2.push([index[key-1],data2[key]])}this.Kategori=kategori;this.Graph2=Graph2;this.JumlahProposal=data3[0];this.JumlahPencairan=data3[1];this.JumlahMuztahik=data3[2];this._loading(0)}},{key:"refreshCount",value:function refreshCount(store){var storeData=!store.value?this.storedUser:store.value;this.$.Counts.url=MyAppGlobals.apiPath+"/api/pendaftarancount";this.$.Counts.headers.authorization=storeData.access_token;this.$.Counts.generateRequest()}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(Beranda.prototype),"connectedCallback",this).call(this);this._loading(1);this.addEventListener("iron-resize",this.onIronResize.bind(this))}},{key:"onIronResize",value:function onIronResize(){this.$.chartBMM1.redraw();this.$.chartBMM2.redraw()}},{key:"handleError",value:function handleError(e){this.error=e.detail.request.xhr.status}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject2_8935bcc0da2b11e9886ab5694315db4a())}},{key:"properties",get:function get(){return{Kategori:{type:Array,notify:!0,value:function value(){return[["data",1]]}},Graph2:{type:Array,notify:!0,value:function value(){return[["data",1]]}},JumlahProposal:Number,JumlahPencairan:Number,JumlahMuztahik:Number,data:{type:Object,notify:!0},options:{type:Object,notify:!0},storedUser:{type:Object,notify:!0}}}},{key:"observers",get:function get(){return["refreshCount(storedUser.*)"]}}]);return Beranda}((0,_myApp.mixinBehaviors)([_myApp.NeonAnimationRunnerBehavior,_myApp.IronResizableBehavior],_myApp.PolymerElement));window.customElements.define("bmm-beranda",Beranda)});