define(["require","./my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_3818dd40a3c111e9ab8d3bc52ff0ef99(){var data=babelHelpers.taggedTemplateLiteral(["\n            <style include=\"shared-styles\">\n                :host {\n                display: block;\n\n                padding: 10px;\n                }\n\n                .full-width {\n                    position : absolute;\n                    top :0;\n                    right:0;\n                    left:0;\n                    bottom:0;\n                    width:100%;\n                    height:100vh;\n                }\n                .img-bg {\n                    background-image: url(\"./images/bg-login.jpg\");\n                    width: 100%;\n                    min-height: 100vh;\n                    display: -webkit-box;\n                    display: -webkit-flex;\n                    display: -moz-box;\n                    display: -ms-flexbox;\n                    display: flex;\n                    flex-wrap: wrap;\n                    justify-content: center;\n                    background-repeat: no-repeat;\n                    background-attachment: fixed;\n                    background-size: cover;\n                    background-position: center;\n                    position: relative;\n                    z-index: 1;\n                }\n                .card {\n                    padding: 8px 16px;\n                    color: #757575;\n                    border-radius: 4px;\n                    background-color: rgba(255, 255, 255, 0.911);\n                    -webkit-filter: drop-shadow(8px 8px 10px rgba(112, 112, 112, 0.514));\n                    filter: drop-shadow(8px 8px 10px rgba(112, 112, 112, 0.514));\n                    width: 40vw;\n                    min-width: 355px;\n                    max-width: 455px;\n                    height: 364px;\n                    position: absolute;\n                    top: 285px;\n                    left: 44%;\n                    overflow: hidden;\n                    transform: translate(-50%,-50%);\n                }\n\n                .card > .input {\n                    position: relative;\n                    display: block;\n                }\n\n                .card > .input > * {\n                    width :100%;\n                }\n                .header  {\n                    text-align: center;\n                }\n                #main  {\n                    display : none;\n                }\n            </style>\n               <bmm-loader></bmm-loader>\n            <div class=\"full-width\" id=\"main\">\n                <div class=\"img-bg\">\n                    <div class=\"card\">\n                        <div class=\"header\">\n                            <img src=\"./images/logo-bmm.png\" width=\"auto\" height=\"110\">\n                        </div>\n                        <div class=\"input\">\n                            <vaadin-text-field label=\"Username\" placeholder=\"Enter Username\" value=\"{{userInput.username}}\" class=\"login\"></vaadin-text-field>\n                            <vaadin-password-field label=\"Password\" placeholder=\"Enter password\" value=\"{{userInput.password}}\" class=\"login\"></vaadin-password-field>\n                            <vaadin-button on-click=\"_loginAccess\">Login</vaadin-button>\n                        </div>\n\n                    </div>\n                </div>\n                <paper-toast text=\"Username atau password salah\" id=\"toast\"></paper-toast>\n            </div>\n            <iron-ajax\n                id=\"LoginPost\"\n                headers='{\"Access-Control-Allow-Origin\": \"*\"}'\n                handle-as=\"json\"\n                method=\"POST\"\n                on-response=\"_loginResponse\"\n                on-error=\"_loginError\"\n                Content-Type=\"application/json\"\n                debounce-duration=\"300\">\n            </iron-ajax>\n            <app-location route=\"{{route}}\"></app-location>\n            <iron-localstorage name=\"login-bmm\" value=\"{{storedUser}}\"></iron-localstorage>\n        "]);_templateObject_3818dd40a3c111e9ab8d3bc52ff0ef99=function _templateObject_3818dd40a3c111e9ab8d3bc52ff0ef99(){return data};return data}new Promise(function(res,rej){return _require.default(["./config/loader.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$loader||{}});var Login=function(_PolymerElement){babelHelpers.inherits(Login,_PolymerElement);function Login(){babelHelpers.classCallCheck(this,Login);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(Login).apply(this,arguments))}babelHelpers.createClass(Login,[{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(Login.prototype),"ready",this).call(this);for(var that=this,login=this.shadowRoot.querySelectorAll(".login"),i=0;i<login.length;i++){login[i].addEventListener("keyup",function(e){if(13==e.keyCode){console.log("prent");that._loginAccess()}})}this._loading(1)}},{key:"_loginAccess",value:function _loginAccess(){this._loading(1);this.$.LoginPost.url=MyAppGlobals.apiPath+"/api/signin";this.$.LoginPost.body=this.userInput;this.$.LoginPost.generateRequest()}},{key:"_loginResponse",value:function _loginResponse(event){var response=event.detail.response;if(response.token){this.error="";this.storedUser={name:response.nama,access_token:response.token,role:response.role,loggedin:!0};this._loading(0);localStorage.setItem("login-bmm",JSON.stringify(this.storedUser));this.set("route.path","/panel")}}},{key:"_loginError",value:function _loginError(event){this._loading(0);var that=this;setTimeout(function(){that.$.toast.open()},2e3)}},{key:"_loading",value:function _loading(show){if(0==show){var that=this;setTimeout(function(){that.shadowRoot.querySelector("bmm-loader").style.display="none";that.shadowRoot.querySelector("#main").style.display="block"},2e3)}else{this.shadowRoot.querySelector("#main").style.display="none";this.shadowRoot.querySelector("bmm-loader").style.display="block"}}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(Login.prototype),"connectedCallback",this).call(this);this._loading(0)}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_3818dd40a3c111e9ab8d3bc52ff0ef99())}},{key:"properties",get:function get(){return{userInput:{type:Object,notify:!0,value:function value(){return{username:"",password:""}}},storedUser:Object,error:String}}}]);return Login}(_myApp.PolymerElement);window.customElements.define("bmm-login",Login)});