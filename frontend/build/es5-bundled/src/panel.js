define(["require","./my-app.js"],function(_require,_myApp){"use strict";_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_38895250a3c111e9ab8d3bc52ff0ef99(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"custom-css\">\n      </style>\n\n      <app-location route=\"{{route}}\" >\n      </app-location>\n\n      <app-route route=\"{{route}}\" pattern=\"/panel/:page\" data=\"{{routeData}}\" tail=\"{{subroute}}\">\n      </app-route>\n\n      <app-drawer-layout fullbleed=\"\" narrow=\"{{narrow}}\">\n        <!-- Drawer content -->\n        <app-drawer id=\"drawer\" slot=\"drawer\" swipe-open=\"[[narrow]]\">\n          <app-toolbar class=\"tool-bar\">\n              <div main-title=\"\">Aplikasi BMM</div>\n              <paper-icon-button icon=\"my-icons:menu\" drawer-toggle=\"\"></paper-icon-button>\n          </app-toolbar>\n          <div class=\"tool-bar-menu\">\n              <div class=\"user-view\">\n                  <div class=\"gambar\">\n                  <img class=\"circle\" src=\"https://materializecss.com/images/yuna.jpg\">\n                  </div>\n\n                  <div class=\"info\">\n                     <p class=\" name\">{{storedUser.name}}</p>\n                     <h5 class=\" email\">{{roleName}}</h5>\n                  </div>\n\n              </div>\n              <hr style=\"width : 90%;margin-left : 5%;opacity : .2\">\n          </div>\n\n          <bmm-menu page=\"{{page}}\"></bmm-menu>\n        </app-drawer>\n\n        <!-- Main content -->\n        <app-header-layout has-scrolling-region=\"\">\n          \n          <app-header slot=\"header\" condenses=\"\" reveals=\"\" effects=\"waterfall\">\n            <app-toolbar>\n              <paper-icon-button icon=\"my-icons:menu\" drawer-toggle=\"\"></paper-icon-button>\n            </app-toolbar>\n          </app-header>\n\n          <iron-pages selected=\"[[page]]\" attr-for-selected=\"name\"   selected-attribute=\"activated\" role=\"main\">\n            <bmm-beranda name=\"beranda\"></bmm-beranda>\n            <bmm-muztahik name=\"muztahik\"></bmm-muztahik>\n            <bmm-proposal name=\"proposal\"></bmm-proposal>\n            <bmm-proposal-add name=\"add-proposal\"></bmm-proposal-add>\n            <bmm-proposal-edit name=\"edit-proposal\"></bmm-proposal-edit>\n            <bmm-laporan name=\"laporan\"></bmm-laporan>\n            <bmm-muztahik-add name=\"add-muztahik\"></bmm-muztahik-add>\n            <bmm-muztahik-edit name=\"edit-muztahik\"></bmm-muztahik-edit>\n            <bmm-verifikator-edit name=\"edit-verifikator\"></bmm-verifikator-edit>\n            <bmm-muztahik-profile name=\"profile-muztahik\"></bmm-muztahik-profile>\n            <bmm-user name=\"user\"></bmm-user>\n            <bmm-user-add name=\"add-user\"></bmm-user-add>\n            <bmm-user-edit name=\"edit-user\"></bmm-user-edit>\n            <bmm-upd-edit name=\"edit-upd\"></bmm-upd-edit>\n            <bmm-loader name=\"loader\"></bmm-loader>\n            <my-view404 name=\"view404\"></my-view404>\n          </iron-pages>\n        </app-header-layout>\n      </app-drawer-layout>\n      <iron-localstorage name=\"login-bmm\" value=\"{{storedUser}}\"></iron-localstorage>\n      \n      <!-- varible global untuk data dan error -->\n      <global-variable key=\"LoginCred\" \n           value=\"{{ storedUser }}\">\n      </global-variable>\n      <global-variable key=\"error\" \n           value=\"{{ error }}\">\n      </global-variable>\n\n      <!-- Untuk membuat varible global memiliki event saat diubah -->\n      <global-data id=\"globalData\"\n         on-set=\"log\">\n      </global-data>\n\n      <iron-ajax\n          id=\"Counts\"\n          headers='{\"Access-Control-Allow-Origin\": \"*\" }'\n          handle-as=\"json\"\n          method=\"GET\"\n          on-response=\"_handleRefresh\"\n          on-error=\"_errorRefresh\"\n          Content-Type=\"application/json\"\n          debounce-duration=\"300\">\n      </iron-ajax>\n    "]);_templateObject_38895250a3c111e9ab8d3bc52ff0ef99=function _templateObject_38895250a3c111e9ab8d3bc52ff0ef99(){return data};return data}new Promise(function(res,rej){return _require.default(["./menu.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$menu||{}});(0,_myApp.setPassiveTouchGestures)(!0);(0,_myApp.setRootPath)(MyAppGlobals.rootPath);var Panel=function(_PolymerElement){babelHelpers.inherits(Panel,_PolymerElement);function Panel(){babelHelpers.classCallCheck(this,Panel);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(Panel).apply(this,arguments))}babelHelpers.createClass(Panel,[{key:"_checkRole",value:function _checkRole(storedUser){switch(storedUser.role){case 1:return"Admin";break;case 2:return"PIC";break;case 3:return"MGR";break;case 4:return"KADIV";break;case 5:return"Admin Register ";break;case 6:return"Keuangan";break;}}},{key:"log",value:function log(e){if(401==e.detail.value){this.$.Counts.url=MyAppGlobals.apiPath+"/api/refresh";this.$.Counts.headers.authorization=this.storedUser.access_token;this.$.Counts.generateRequest()}}},{key:"_checkLogin",value:function _checkLogin(data){if(null!=data){if(!data.value){window.location.href="/login"}this.roleName=this._checkRole(this.storedUser)}else{window.location.href="/login"}}},{key:"_routePageChanged",value:function _routePageChanged(page){if(!page){this.page="beranda"}else if(-1!==["beranda","muztahik","laporan","proposal","user","loader"].indexOf(page)){var url=this.subroute.path.split("/")[1];if(this.subroute.path){if(-1!==["add-muztahik","edit-muztahik","profile-muztahik","edit-proposal","add-proposal","edit-verifikator","add-user","edit-user","edit-upd"].lastIndexOf(url)){this.page=url}else{this.page="view404"}}else{this.page=page}}else{this.page="view404"}if(!this.$.drawer.persistent){this.$.drawer.close()}}},{key:"_pageChanged",value:function _pageChanged(page){switch(page){case"beranda":new Promise(function(res,rej){return _require.default(["./bmm-component/beranda.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$beranda||{}});break;case"muztahik":new Promise(function(res,rej){return _require.default(["./bmm-component/muztahik.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$muztahik||{}});break;case"add-muztahik":new Promise(function(res,rej){return _require.default(["./bmm-component/muztahik-add.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$muztahikAdd||{}});break;case"edit-muztahik":new Promise(function(res,rej){return _require.default(["./bmm-component/muztahik-edit.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$muztahikEdit||{}});break;case"profile-muztahik":new Promise(function(res,rej){return _require.default(["./bmm-component/muztahik-profile.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$muztahikProfile||{}});break;case"laporan":new Promise(function(res,rej){return _require.default(["./bmm-component/laporan.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$laporan||{}});break;case"proposal":new Promise(function(res,rej){return _require.default(["./bmm-component/proposal.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$proposal||{}});break;case"add-proposal":new Promise(function(res,rej){return _require.default(["./bmm-component/proposal-add.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$proposalAdd||{}});break;case"edit-proposal":new Promise(function(res,rej){return _require.default(["./bmm-component/proposal-edit.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$proposalEdit||{}});break;case"edit-verifikator":new Promise(function(res,rej){return _require.default(["./bmm-component/verifikator-edit.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$verifikatorEdit||{}});break;case"user":new Promise(function(res,rej){return _require.default(["./bmm-component/user.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$user||{}});break;case"add-user":new Promise(function(res,rej){return _require.default(["./bmm-component/user-add.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$userAdd||{}});break;case"edit-user":new Promise(function(res,rej){return _require.default(["./bmm-component/user-edit.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$userEdit||{}});break;case"edit-upd":new Promise(function(res,rej){return _require.default(["./bmm-component/upd-edit.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$updEdit||{}});break;case"loader":new Promise(function(res,rej){return _require.default(["./config/loader.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$loader||{}});break;case"view404":new Promise(function(res,rej){return _require.default(["./my-view404.js"],res,rej)}).then(function(bundle){return bundle&&bundle.$myView404||{}});break;}}},{key:"_handleRefresh",value:function _handleRefresh(event){var response=event.detail.response;this.error="";this.storedUser={name:response.nama,access_token:response.token,role:response.role,loggedin:!0};localStorage.setItem("login-bmm",JSON.stringify(this.storedUser));this.set("route.path","/panel")}},{key:"_errorRefresh",value:function _errorRefresh(event){window.location.href="/login";this.storedUser=null}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_38895250a3c111e9ab8d3bc52ff0ef99())}},{key:"properties",get:function get(){var _ref;return _ref={page:{type:String,reflectToAttribute:!0,observer:"_pageChanged"},routeData:{type:Object},subroute:Object,loginStatus:{type:Object,notify:!0}},babelHelpers.defineProperty(_ref,"loginStatus",{type:Object,notify:!0}),babelHelpers.defineProperty(_ref,"storedUser",{type:Object,notify:!0}),babelHelpers.defineProperty(_ref,"roleName",{type:String}),_ref}},{key:"observers",get:function get(){return["_routePageChanged(routeData.page)","_checkLogin(storedUser.*)"]}}]);return Panel}(_myApp.PolymerElement);window.customElements.define("bmm-panel",Panel)});